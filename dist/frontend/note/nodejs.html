<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js | 火龙果文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/plugin/images/common/logo.png">
    <meta name="description" content="Karl_fang文档笔记">
    
    <link rel="preload" href="/plugin/assets/css/0.styles.fbc72d59.css" as="style"><link rel="preload" href="/plugin/assets/js/app.c41e27de.js" as="script"><link rel="preload" href="/plugin/assets/js/2.15a8e080.js" as="script"><link rel="preload" href="/plugin/assets/js/47.78afac36.js" as="script"><link rel="preload" href="/plugin/assets/js/7.182851cf.js" as="script"><link rel="prefetch" href="/plugin/assets/js/10.ed8b28ac.js"><link rel="prefetch" href="/plugin/assets/js/11.78686222.js"><link rel="prefetch" href="/plugin/assets/js/12.78b37227.js"><link rel="prefetch" href="/plugin/assets/js/13.af3ff66a.js"><link rel="prefetch" href="/plugin/assets/js/14.06b89103.js"><link rel="prefetch" href="/plugin/assets/js/15.1611894f.js"><link rel="prefetch" href="/plugin/assets/js/16.0e8fa8bc.js"><link rel="prefetch" href="/plugin/assets/js/17.f7c49899.js"><link rel="prefetch" href="/plugin/assets/js/18.bbaf458c.js"><link rel="prefetch" href="/plugin/assets/js/19.d6807709.js"><link rel="prefetch" href="/plugin/assets/js/20.1ce4cc7d.js"><link rel="prefetch" href="/plugin/assets/js/21.0e7dbe25.js"><link rel="prefetch" href="/plugin/assets/js/22.18283adc.js"><link rel="prefetch" href="/plugin/assets/js/23.97f8bc82.js"><link rel="prefetch" href="/plugin/assets/js/24.a58845ea.js"><link rel="prefetch" href="/plugin/assets/js/25.b8e3c6db.js"><link rel="prefetch" href="/plugin/assets/js/26.6908e271.js"><link rel="prefetch" href="/plugin/assets/js/27.c219e5bc.js"><link rel="prefetch" href="/plugin/assets/js/28.52f425d6.js"><link rel="prefetch" href="/plugin/assets/js/29.7aac5430.js"><link rel="prefetch" href="/plugin/assets/js/3.394c7c19.js"><link rel="prefetch" href="/plugin/assets/js/30.ed93fd03.js"><link rel="prefetch" href="/plugin/assets/js/31.dc4ed7b6.js"><link rel="prefetch" href="/plugin/assets/js/32.be9b79c4.js"><link rel="prefetch" href="/plugin/assets/js/33.f42860e9.js"><link rel="prefetch" href="/plugin/assets/js/34.d882edcc.js"><link rel="prefetch" href="/plugin/assets/js/35.52946cbc.js"><link rel="prefetch" href="/plugin/assets/js/36.3ae290ac.js"><link rel="prefetch" href="/plugin/assets/js/37.c049196f.js"><link rel="prefetch" href="/plugin/assets/js/38.9c13b76f.js"><link rel="prefetch" href="/plugin/assets/js/39.232c15b2.js"><link rel="prefetch" href="/plugin/assets/js/4.3512e7c4.js"><link rel="prefetch" href="/plugin/assets/js/40.cea14189.js"><link rel="prefetch" href="/plugin/assets/js/41.95dc5d2e.js"><link rel="prefetch" href="/plugin/assets/js/42.1f753cf8.js"><link rel="prefetch" href="/plugin/assets/js/43.68007c4a.js"><link rel="prefetch" href="/plugin/assets/js/44.4effc8d6.js"><link rel="prefetch" href="/plugin/assets/js/45.229d6844.js"><link rel="prefetch" href="/plugin/assets/js/46.9e83e10b.js"><link rel="prefetch" href="/plugin/assets/js/48.8d8f80cb.js"><link rel="prefetch" href="/plugin/assets/js/49.a7468e68.js"><link rel="prefetch" href="/plugin/assets/js/5.874aba06.js"><link rel="prefetch" href="/plugin/assets/js/50.4aa6c206.js"><link rel="prefetch" href="/plugin/assets/js/51.c5050143.js"><link rel="prefetch" href="/plugin/assets/js/52.64395ea4.js"><link rel="prefetch" href="/plugin/assets/js/53.93212cc3.js"><link rel="prefetch" href="/plugin/assets/js/54.6c76213c.js"><link rel="prefetch" href="/plugin/assets/js/55.b2ecb09d.js"><link rel="prefetch" href="/plugin/assets/js/56.753012ed.js"><link rel="prefetch" href="/plugin/assets/js/57.6c6ed6d8.js"><link rel="prefetch" href="/plugin/assets/js/58.4d0dc9b4.js"><link rel="prefetch" href="/plugin/assets/js/59.c4787e52.js"><link rel="prefetch" href="/plugin/assets/js/6.98244b2a.js"><link rel="prefetch" href="/plugin/assets/js/60.de559b3f.js"><link rel="prefetch" href="/plugin/assets/js/61.abbbbf76.js"><link rel="prefetch" href="/plugin/assets/js/62.b8eda97a.js"><link rel="prefetch" href="/plugin/assets/js/63.6699f4f4.js"><link rel="prefetch" href="/plugin/assets/js/64.9d5ff5e7.js"><link rel="prefetch" href="/plugin/assets/js/65.c2d2167a.js"><link rel="prefetch" href="/plugin/assets/js/66.bd974722.js"><link rel="prefetch" href="/plugin/assets/js/67.6eb0d63f.js"><link rel="prefetch" href="/plugin/assets/js/68.ef826dcf.js"><link rel="prefetch" href="/plugin/assets/js/69.3557aa3c.js"><link rel="prefetch" href="/plugin/assets/js/70.fbe5ca50.js"><link rel="prefetch" href="/plugin/assets/js/71.826ede10.js"><link rel="prefetch" href="/plugin/assets/js/72.a045868a.js"><link rel="prefetch" href="/plugin/assets/js/73.fe23e313.js"><link rel="prefetch" href="/plugin/assets/js/74.33a8bbd2.js"><link rel="prefetch" href="/plugin/assets/js/8.58f1b485.js"><link rel="prefetch" href="/plugin/assets/js/9.7f9a66d9.js">
    <link rel="stylesheet" href="/plugin/assets/css/0.styles.fbc72d59.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/plugin/" class="home-link router-link-active"><img src="/plugin/images/common/logo.png" alt="火龙果文档" class="logo"> <span class="site-name can-hide">火龙果文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/plugin/" class="nav-link">
    主页
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><span class="title">导航</span> <span class="arrow down"></span></button> <button type="button" aria-label="导航" class="mobile-dropdown-title"><span class="title">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
            其他
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/help/emoji.html" class="nav-link">
    Emoji
  </a></li></ul></li><li class="dropdown-item"><h4>
            插件
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/plugin/前言.html" class="nav-link">
    前言
  </a></li><li class="dropdown-subitem"><a href="/plugin/plugin/myDevTool.html" class="nav-link">
    myDevTool
  </a></li><li class="dropdown-subitem"><a href="/plugin/plugin/myNewTab.html" class="nav-link">
    myNewTab
  </a></li><li class="dropdown-subitem"><a href="/plugin/plugin/Pitaya.html" class="nav-link">
    Pitaya
  </a></li></ul></li><li class="dropdown-item"><h4>
            Manifest V3
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/guide/V3的配置更改.html" class="nav-link">
    V3的配置更改
  </a></li><li class="dropdown-subitem"><a href="/plugin/guide/V3的manifest.html" class="nav-link">
    V3的manifest
  </a></li><li class="dropdown-subitem"><a href="/plugin/help/declarePermission.html" class="nav-link">
    权限声明
  </a></li></ul></li><li class="dropdown-item"><h4>
            NPM库
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/npm/mylibs.html" class="nav-link">
    @karl_fang/mylibs
  </a></li><li class="dropdown-subitem"><a href="/plugin/npm/js数据结构.html" class="nav-link">
    @karl_fang/data-structure
  </a></li></ul></li><li class="dropdown-item"><h4>
            脚手架工具
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/guide/karl-cli.html" class="nav-link">
    karl-cli
  </a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
            Vue笔记系列
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(1).html" class="nav-link">
    Vue(1)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(2).html" class="nav-link">
    Vue(2)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(3).html" class="nav-link">
    Vue(3)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(4).html" class="nav-link">
    Vue(4)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(5).html" class="nav-link">
    Vue(5)
  </a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/ox4f5da2" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/plugin/" class="nav-link">
    主页
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><span class="title">导航</span> <span class="arrow down"></span></button> <button type="button" aria-label="导航" class="mobile-dropdown-title"><span class="title">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
            其他
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/help/emoji.html" class="nav-link">
    Emoji
  </a></li></ul></li><li class="dropdown-item"><h4>
            插件
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/plugin/前言.html" class="nav-link">
    前言
  </a></li><li class="dropdown-subitem"><a href="/plugin/plugin/myDevTool.html" class="nav-link">
    myDevTool
  </a></li><li class="dropdown-subitem"><a href="/plugin/plugin/myNewTab.html" class="nav-link">
    myNewTab
  </a></li><li class="dropdown-subitem"><a href="/plugin/plugin/Pitaya.html" class="nav-link">
    Pitaya
  </a></li></ul></li><li class="dropdown-item"><h4>
            Manifest V3
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/guide/V3的配置更改.html" class="nav-link">
    V3的配置更改
  </a></li><li class="dropdown-subitem"><a href="/plugin/guide/V3的manifest.html" class="nav-link">
    V3的manifest
  </a></li><li class="dropdown-subitem"><a href="/plugin/help/declarePermission.html" class="nav-link">
    权限声明
  </a></li></ul></li><li class="dropdown-item"><h4>
            NPM库
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/npm/mylibs.html" class="nav-link">
    @karl_fang/mylibs
  </a></li><li class="dropdown-subitem"><a href="/plugin/npm/js数据结构.html" class="nav-link">
    @karl_fang/data-structure
  </a></li></ul></li><li class="dropdown-item"><h4>
            脚手架工具
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/guide/karl-cli.html" class="nav-link">
    karl-cli
  </a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
            Vue笔记系列
          </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(1).html" class="nav-link">
    Vue(1)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(2).html" class="nav-link">
    Vue(2)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(3).html" class="nav-link">
    Vue(3)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(4).html" class="nav-link">
    Vue(4)
  </a></li><li class="dropdown-subitem"><a href="/plugin/frontend/note/Vue(5).html" class="nav-link">
    Vue(5)
  </a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/ox4f5da2" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/plugin/作者的话.html" class="sidebar-link">作者的话</a></li><li><a href="/plugin/Chrome插件.html" class="sidebar-link">Chrome插件</a></li><li><a href="/plugin/脚手架工具开发.html" class="sidebar-link">脚手架工具开发</a></li><li><a href="/plugin/vuepress.html" class="sidebar-link">vuepress快速上手</a></li><li><a href="/plugin/前端笔记.html" class="sidebar-link">前端笔记</a></li><li><a href="/plugin/npm发布流程.html" class="sidebar-link">npm发布流程</a></li><li><a href="/plugin/Leetcode.html" class="sidebar-link">Leetcode</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-初识node-js">1 初识Node.js</a><ul><li><a href="#_1-1-什么是node-js">1.1 什么是node.js</a></li><li><a href="#_1-2-nodejs的优势">1.2 NodeJs的优势</a></li><li><a href="#_1-3-node需要安装什么">1.3 node需要安装什么</a></li><li><a href="#_1-4-常用命令">1.4 常用命令</a></li><li><a href="#_1-5-node模块">1.5 node模块</a></li><li><a href="#_1-6-commonjs规范">1.6 CommonJS规范</a></li></ul></li><li><a href="#_2-url、path、fs模块">2 url、path、fs模块</a><ul><li><a href="#_2-1模块缓存">2.1模块缓存</a></li><li><a href="#_2-2-path模块">2.2 path模块</a></li><li><a href="#_2-3-url模块">2.3 url模块</a></li><li><a href="#_2-4-fs模块">2.4 fs模块</a></li></ul></li><li><a href="#_3-爬虫">3 爬虫</a><ul><li><a href="#_3-1-request模块的安装">3.1 request模块的安装</a></li><li><a href="#_3-2-request模块引入">3.2 request模块引入</a></li><li><a href="#_3-3-request模块中的get方法">3.3 request模块中的get方法</a></li></ul></li><li><a href="#_4-express框架">4 express框架</a><ul><li><a href="#_4-1-art-template">4.1 art-template</a></li><li><a href="#_4-2-express的get请求">4.2 express的get请求</a></li><li><a href="#_4-3-express结合art-template">4.3 express结合art-template</a></li><li><a href="#_4-4-express的post请求">4.4 express的post请求</a></li></ul></li><li><a href="#_5-cookie和session">5 cookie和session</a><ul><li><a href="#_5-1-cookie">5.1 cookie</a></li><li><a href="#_5-2-session">5.2 session</a></li></ul></li></ul></div><p></p> <h2 id="_1-初识node-js"><a href="#_1-初识node-js" class="header-anchor">#</a> 1 初识Node.js</h2> <h3 id="_1-1-什么是node-js"><a href="#_1-1-什么是node-js" class="header-anchor">#</a> 1.1 什么是node.js</h3> <p>Node.js是一个Javascript运行环境(runtime)。发布于2009年5月，由RyanDahl开发，实质是对Chrorne V8引擎进行了封装。Nodejs是基于V8引擎，V8 是Google发布的开源JavaScript引擎，本身就是用于Chrome浏览器的JS解释部分，但是V8是一个可以独立的模块，完全可以嵌入你自己的应用，所以被Ryan Dahl这哥们，鬼才般的，把这个V8搬到了服务器上，用于做服务器的软件。</p> <h3 id="_1-2-nodejs的优势"><a href="#_1-2-nodejs的优势" class="header-anchor">#</a> 1.2 NodeJs的优势</h3> <ol><li>NodeJs语法完全是js语法，只要你懂JS基础就可以学会Nodejs后端开发。</li> <li>NodeJs超强的高并发能力。</li> <li>实现高性能服务器</li> <li>开发周期短、开发成本低、学习成本低</li></ol> <h3 id="_1-3-node需要安装什么"><a href="#_1-3-node需要安装什么" class="header-anchor">#</a> 1.3 node需要安装什么</h3> <p>安装内容:</p> <ul><li><p>官网直接下载: https://nodejs.org/zh-cn/</p></li> <li><p><code>npm</code>: (node package manager)</p></li> <li><p><code>cnpm</code>: <strong>(淘宝镜像)</strong>--https://npmmirror.com/</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>安装<strong>cnpm</strong>: <code>npm install -g cnpm --registrry=https://registry.npmmirror.com</code></li> <li>更改镜像源: <code>npm config set registry https://registry.npmmirror.com</code></li> <li>#查看npm配置信息
<code>npm config list</code></li></ul></div> <p>结果如下所示:</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;&gt;xxx@xxxdeMacBook-Pro ~ % npm config set registry https://registry.npmmirror.com

&gt;&gt;xxx@xxxdeMacBook-Pro ~ % npm config list
; &quot;user&quot; config from /Users/karl/.npmrc

registry = &quot;https://registry.npmmirror.com/&quot; 

; node bin location = /usr/local/bin/node
; cwd = /Users/karl
; HOME = /Users/karl
; Run `npm config ls -l` to show all defaults.
</code></pre></div><ul><li><code>nodemon</code>: <code>npm install nodemon -g</code>(运行内容自动更新,相当于vs code的live Server)</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果是macBook电脑需要输入<code>sudo npm install nodemon -g</code>,然后输入开机密码,如果不加<strong>sudo</strong>就会出现错误日志为: <strong>Error: EACCES: permission denied</strong></p></div> <p>查看版本:</p> <div class="language- extra-class"><pre class="language-text"><code>[xxx@xxxdeMacBook-Pro ~ % nodemon -v            
2.0.15
┌─────────────────────────────────────────────────────────┐
│               nodemon update check failed               │
│           Try running with sudo or get access           │
│          to the local update config store via           │
│ sudo chown -R $USER:$(id -gn $USER) /Users/karl/.config │
└─────────────────────────────────────────────────────────┘
</code></pre></div><p>可以按照提示输入: <code>sudo chown -R $USER:$(id -gn $USER) /Users/karl/.config</code>,也可不输</p> <h3 id="_1-4-常用命令"><a href="#_1-4-常用命令" class="header-anchor">#</a> 1.4 常用命令</h3> <ul><li><p>退回上一目录 <code>cd ..\</code></p></li> <li><p>进入指定目录 <code>cd名字</code></p></li> <li><p>进入D盘 <code>D:</code> (windows)</p></li> <li><p>清空 <code>cls</code></p></li> <li><p>生成package.json说明书文件 <code>npm init</code></p> <blockquote><p>可以跳过向导，快速生成 <code>npm init -y</code></p></blockquote></li> <li><p>下载包 <code>npm install 包名</code></p></li> <li><p>删除包 <code>npm uninstall 包名</code></p></li></ul> <h3 id="_1-5-node模块"><a href="#_1-5-node模块" class="header-anchor">#</a> 1.5 node模块</h3> <h4 id="_1-5-1-模块概述"><a href="#_1-5-1-模块概述" class="header-anchor">#</a> 1.5.1 模块概述</h4> <ul><li><p>核心模块(系统自带的模块)</p> <ul><li><p>文件操作的<strong>fs</strong></p></li> <li><p>http服务操作的<strong>http</strong></p></li> <li><p><strong>url</strong>路径操作模块</p></li> <li><p><strong>path</strong>路径处理模块</p></li> <li><p><strong>os</strong>操作系统信息</p></li></ul></li> <li><p>第三方模块</p> <ul><li><strong>art-template jquery vuex express</strong>等</li> <li>必须通过npm来下载才可以使用</li></ul></li> <li><p>自定义模块</p> <ul><li>自己创建的文件</li></ul></li></ul> <h4 id="_1-5-2-http模块创建"><a href="#_1-5-2-http模块创建" class="header-anchor">#</a> 1.5.2 http模块创建</h4> <ol><li>引入http模块</li></ol> <p><code>let http = require('http');</code></p> <ol start="2"><li>createServer搭建服务</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在终端打印1</span>
  res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'111'</span><span class="token punctuation">)</span> <span class="token comment">// 在页面上显示111,写成数字111就会报错</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 结束,必写,否则会一直转动或者直接写成res.end('111后台传入数据')</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span> <span class="token comment">// 链式调用</span>
<span class="token comment">// req: request</span>
<span class="token comment">// res: response</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>如果传入的是汉字则需要设置响应头,否则会出现乱码
<code>res.setHeader(&quot;Content-Type&quot;, &quot;text/plain;charset=utf-8&quot;)</code>
常见Content-Type见<strong>5.3 媒体格式类型</strong>内容</p></div> <ol start="3"><li>在终端内输入命令</li></ol> <p><code>nodemon 文件名</code></p> <ol start="4"><li>运行结果如下</li></ol> <div class="language- extra-class"><pre class="language-text"><code>xxx@xxxdeMacBook-Pro node % nodemon xxx.js 
[nodemon] 2.0.15
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,json
[nodemon] starting `node httpModule.js`
</code></pre></div><ol start="5"><li>打开浏览器地址栏输入127.0.0.1:8000</li> <li>得到执行结果</li></ol> <h4 id="_1-5-3-媒体格式类型"><a href="#_1-5-3-媒体格式类型" class="header-anchor">#</a> 1.5.3 媒体格式类型</h4> <h4 id="_1-5-3-1-常见的媒体格式类型"><a href="#_1-5-3-1-常见的媒体格式类型" class="header-anchor">#</a> 1.5.3.1 常见的媒体格式类型</h4> <ul><li>text/html: HTML格式</li> <li>text/plain: 纯文本格式</li> <li>text/xml: XML格式</li> <li>image/gif: gif图片格式</li> <li>image/jpeg : jpg图片格式</li> <li>image/png: png图片格式</li></ul> <h4 id="_1-5-3-2-以application开头的媒体格式类型"><a href="#_1-5-3-2-以application开头的媒体格式类型" class="header-anchor">#</a> 1.5.3.2 以application开头的媒体格式类型</h4> <ul><li><p>application/xhtml+xml: XHTML格式</p></li> <li><p>application/xml:  XML数据格式</p></li> <li><p>application/atom+xml: Atom XML聚合格式</p></li> <li><p>application/json:  JSON数据格式</p></li> <li><p>application/pdf: pdf格式</p></li> <li><p>application/msword: Word文档格式</p></li> <li><p>application/octet-stream: 二进制流数据（如常见的文件下载）</p></li> <li><p>application/x-www-form-urlencoded:</p> <blockquote><p>form表单数据被编码为key/value格式发送到服务器(表单默认的提交数据的格式)</p></blockquote></li></ul> <h3 id="_1-6-commonjs规范"><a href="#_1-6-commonjs规范" class="header-anchor">#</a> 1.6 CommonJS规范</h3> <div class="backTop" data-v-56841737><section class="rocket" data-v-56841737><img src="/plugin/images/common/rocket.svg" alt="返回顶部" title="返回顶部" data-v-56841737></section></div> <p>node应用由模块组成,采用的commonjs模块规范.每一个文件就是一个模块,拥有自己独立的作用域,变量,以及方法等,对其他的模块都不可见.CommonJS规范规定,每个模块内部,module变量代表当前模块.这个变量是一个对象,它的<strong>exports</strong>属性(即module.exports)是对外的接口.加载某个模块,其实是加载该模块的module.exports属性.<strong>require</strong>方法用于加载模块.</p> <h2 id="_2-url、path、fs模块"><a href="#_2-url、path、fs模块" class="header-anchor">#</a> 2 url、path、fs模块</h2> <h3 id="_2-1模块缓存"><a href="#_2-1模块缓存" class="header-anchor">#</a> 2.1模块缓存</h3> <p>这样做的目的是避免重复加载,提高模块加载效率</p> <p>示例:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span>obj<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./storage.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token comment">//{a:1,b:2,c:3}</span>
obj<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token number">4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token comment">//{a: 1, b: 2, c: 3, d: 4}</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token literal-property property">obj</span><span class="token operator">:</span>obj1<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./storage.js'</span> <span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token comment">//{a: 1, b: 2, c: 3, d: 4}</span>
</code></pre></div><h3 id="_2-2-path模块"><a href="#_2-2-path模块" class="header-anchor">#</a> 2.2 path模块</h3> <h4 id="_2-2-1-path模块引入"><a href="#_2-2-1-path模块引入" class="header-anchor">#</a> 2.2.1 path模块引入</h4> <p><code>const path = require('path')</code></p> <p>打印结果:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;ref *2&gt; {
  resolve: [Function: resolve],
  normalize: [Function: normalize],
  isAbsolute: [Function: isAbsolute],
  join: [Function: join],
  relative: [Function: relative],
  toNamespacedPath: [Function: toNamespacedPath],
  dirname: [Function: dirname],
  basename: [Function: basename],
  extname: [Function: extname],
  format: [Function: bound _format],
  parse: [Function: parse],
  sep: '/',
  delimiter: ':',
  win32: &lt;ref *1&gt; {
    resolve: [Function: resolve],
    normalize: [Function: normalize],
    isAbsolute: [Function: isAbsolute],
    join: [Function: join],
    relative: [Function: relative],
    toNamespacedPath: [Function: toNamespacedPath],
    dirname: [Function: dirname],
    basename: [Function: basename],
    extname: [Function: extname],
    format: [Function: bound _format],
    parse: [Function: parse],
    sep: '\\',
    delimiter: ';',
    win32: [Circular *1],
    posix: [Circular *2],
    _makeLong: [Function: toNamespacedPath]
  },
  posix: [Circular *2],
  _makeLong: [Function: toNamespacedPath]
}
</code></pre></div><blockquote><p>join方法会把/转换成\</p></blockquote> <h4 id="_2-2-2-path模块中文件路径的常用规定字"><a href="#_2-2-2-path模块中文件路径的常用规定字" class="header-anchor">#</a> 2.2.2 path模块中文件路径的常用规定字</h4> <ul><li><code>__dirname</code>: 指向当前js文件所在<strong>文件夹</strong>的绝对路径</li> <li><code>__filename</code>: 指向当前<strong>js文件</strong>所的绝对路径</li></ul> <blockquote><p>其中<code>__filename</code>其实相当于<code>path.join(__dirname, '文件夹名')</code></p></blockquote> <h4 id="_2-2-3-path模块中的resolve"><a href="#_2-2-3-path模块中的resolve" class="header-anchor">#</a> 2.2.3 path模块中的resolve</h4> <p><strong>resolve函数作用: 将参数装换成绝对路径</strong></p> <ol><li>不带参数时
<code>path.resolve()</code>: 返回的是当前文件所在文件夹的绝对路径</li> <li>带参数(带不是**/**开头的参数)
<code>path. resolve('a.js')</code>: 返回的是当前文件所在文件夹的绝对路径与参数拼接的结果</li> <li>**./**开头的参数同情况2</li> <li>带**/<strong>参数: 返回的是最后一个前面加</strong>/**的参数拼接其右边的所有参数</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span> <span class="token comment">// C:\a\b</span>
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token string">'/b'</span><span class="token punctuation">)</span><span class="token comment">// C:\b</span>
</code></pre></div><h4 id="_2-2-4-path模块中的parse"><a href="#_2-2-4-path模块中的parse" class="header-anchor">#</a> 2.2.4 path模块中的parse</h4> <h3 id="_2-3-url模块"><a href="#_2-3-url模块" class="header-anchor">#</a> 2.3 url模块</h3> <h4 id="_2-3-1-url模块引入"><a href="#_2-3-1-url模块引入" class="header-anchor">#</a> 2.3.1 url模块引入</h4> <p><code>const url = require('url')</code></p> <p>打印结果:</p> <div class="language- extra-class"><pre class="language-text"><code>{
  Url: [Function: Url],
  parse: [Function: urlParse],
  resolve: [Function: urlResolve],
  resolveObject: [Function: urlResolveObject],
  format: [Function: urlFormat],
  URL: [class URL],
  URLSearchParams: [class URLSearchParams],
  domainToASCII: [Function: domainToASCII],
  domainToUnicode: [Function: domainToUnicode],
  pathToFileURL: [Function: pathToFileURL],
  fileURLToPath: [Function: fileURLToPath],
  urlToHttpOptions: [Function: urlToHttpOptions]
}
</code></pre></div><h4 id="_2-3-2-url模块中的url类"><a href="#_2-3-2-url模块中的url类" class="header-anchor">#</a> 2.3.2 url模块中的URL类</h4> <p>URL使用:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">URL</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/login?username=zx&amp;&amp;password=123456'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</code></pre></div><p>结果打印:</p> <div class="language- extra-class"><pre class="language-text"><code>URL {
  href: 'http://127.0.0.1:8000/login?username=zx&amp;&amp;password=123456',
  origin: 'http://127.0.0.1:8000',
  protocol: 'http:',
  username: '',
  password: '',
  host: '127.0.0.1:8000',
  hostname: '127.0.0.1',
  port: '8000',
  pathname: '/login',
  search: '?username=zx&amp;&amp;password=123456',
  searchParams: URLSearchParams { 'username' =&gt; 'zx', 'password' =&gt; '123456' },
  hash: ''
}
</code></pre></div><blockquote><p>origin: 同源策略,即协议、域名、端口号</p></blockquote> <h3 id="_2-4-fs模块"><a href="#_2-4-fs模块" class="header-anchor">#</a> 2.4 fs模块</h3> <h4 id="_2-4-1-fs模块引入"><a href="#_2-4-1-fs模块引入" class="header-anchor">#</a> 2.4.1 fs模块引入</h4> <p><code>const fs = require('fs')</code></p> <p>打印结果:</p> <div class="language- extra-class"><pre class="language-text"><code>{
  appendFile: [Function: appendFile],
  appendFileSync: [Function: appendFileSync],
  access: [Function: access],
  accessSync: [Function: accessSync],
  chown: [Function: chown],
  chownSync: [Function: chownSync],
  chmod: [Function: chmod],
  chmodSync: [Function: chmodSync],
  close: [Function: close],
  closeSync: [Function: closeSync],
  copyFile: [Function: copyFile],
  copyFileSync: [Function: copyFileSync],
  cp: [Function: cp],
  cpSync: [Function: cpSync],
  createReadStream: [Function: createReadStream],
  createWriteStream: [Function: createWriteStream],
  exists: [Function: exists],
  existsSync: [Function: existsSync],
  fchown: [Function: fchown],
  fchownSync: [Function: fchownSync],
  fchmod: [Function: fchmod],
  fchmodSync: [Function: fchmodSync],
  fdatasync: [Function: fdatasync],
  fdatasyncSync: [Function: fdatasyncSync],
  fstat: [Function: fstat],
  fstatSync: [Function: fstatSync],
  fsync: [Function: fsync],
  fsyncSync: [Function: fsyncSync],
  ftruncate: [Function: ftruncate],
  ftruncateSync: [Function: ftruncateSync],
  futimes: [Function: futimes],
  futimesSync: [Function: futimesSync],
  lchown: [Function: lchown],
  lchownSync: [Function: lchownSync],
  lchmod: [Function: lchmod],
  lchmodSync: [Function: lchmodSync],
  link: [Function: link],
  linkSync: [Function: linkSync],
  lstat: [Function: lstat],
  lstatSync: [Function: lstatSync],
  lutimes: [Function: lutimes],
  lutimesSync: [Function: lutimesSync],
  mkdir: [Function: mkdir],
  mkdirSync: [Function: mkdirSync],
  mkdtemp: [Function: mkdtemp],
  mkdtempSync: [Function: mkdtempSync],
  open: [Function: open],
  openSync: [Function: openSync],
  opendir: [Function: opendir],
  opendirSync: [Function: opendirSync],
  readdir: [Function: readdir],
  readdirSync: [Function: readdirSync],
  read: [Function: read],
  readSync: [Function: readSync],
  readv: [Function: readv],
  readvSync: [Function: readvSync],
  readFile: [Function: readFile],
  readFileSync: [Function: readFileSync],
  readlink: [Function: readlink],
  readlinkSync: [Function: readlinkSync],
  realpath: [Function: realpath] { native: [Function (anonymous)] },
  realpathSync: [Function: realpathSync] { native: [Function (anonymous)] },
  rename: [Function: rename],
  renameSync: [Function: renameSync],
  rm: [Function: rm],
  rmSync: [Function: rmSync],
  rmdir: [Function: rmdir],
  rmdirSync: [Function: rmdirSync],
  stat: [Function: stat],
  statSync: [Function: statSync],
  symlink: [Function: symlink],
  symlinkSync: [Function: symlinkSync],
  truncate: [Function: truncate],
  truncateSync: [Function: truncateSync],
  unwatchFile: [Function: unwatchFile],
  unlink: [Function: unlink],
  unlinkSync: [Function: unlinkSync],
  utimes: [Function: utimes],
  utimesSync: [Function: utimesSync],
  watch: [Function: watch],
  watchFile: [Function: watchFile],
  writeFile: [Function: writeFile],
  writeFileSync: [Function: writeFileSync],
  write: [Function: write],
  writeSync: [Function: writeSync],
  writev: [Function: writev],
  writevSync: [Function: writevSync],
  Dir: [class Dir],
  Dirent: [class Dirent],
  Stats: [Function: Stats],
  ReadStream: [Getter/Setter],
  WriteStream: [Getter/Setter],
  FileReadStream: [Getter/Setter],
  FileWriteStream: [Getter/Setter],
  _toUnixTimestamp: [Function: toUnixTimestamp],
  F_OK: 0,
  R_OK: 4,
  W_OK: 2,
  X_OK: 1,
  constants: [Object: null prototype] {
    UV_FS_SYMLINK_DIR: 1,
    UV_FS_SYMLINK_JUNCTION: 2,
    O_RDONLY: 0,
    O_WRONLY: 1,
    O_RDWR: 2,
    UV_DIRENT_UNKNOWN: 0,
    UV_DIRENT_FILE: 1,
    UV_DIRENT_DIR: 2,
    UV_DIRENT_LINK: 3,
    UV_DIRENT_FIFO: 4,
    UV_DIRENT_SOCKET: 5,
    UV_DIRENT_CHAR: 6,
    UV_DIRENT_BLOCK: 7,
    S_IFMT: 61440,
    S_IFREG: 32768,
    S_IFDIR: 16384,
    S_IFCHR: 8192,
    S_IFBLK: 24576,
    S_IFIFO: 4096,
    S_IFLNK: 40960,
    S_IFSOCK: 49152,
    O_CREAT: 512,
    O_EXCL: 2048,
    UV_FS_O_FILEMAP: 0,
    O_NOCTTY: 131072,
    O_TRUNC: 1024,
    O_APPEND: 8,
    O_DIRECTORY: 1048576,
    O_NOFOLLOW: 256,
    O_SYNC: 128,
    O_DSYNC: 4194304,
    O_SYMLINK: 2097152,
    O_NONBLOCK: 4,
    S_IRWXU: 448,
    S_IRUSR: 256,
    S_IWUSR: 128,
    S_IXUSR: 64,
    S_IRWXG: 56,
    S_IRGRP: 32,
    S_IWGRP: 16,
    S_IXGRP: 8,
    S_IRWXO: 7,
    S_IROTH: 4,
    S_IWOTH: 2,
    S_IXOTH: 1,
    F_OK: 0,
    R_OK: 4,
    W_OK: 2,
    X_OK: 1,
    UV_FS_COPYFILE_EXCL: 1,
    COPYFILE_EXCL: 1,
    UV_FS_COPYFILE_FICLONE: 2,
    COPYFILE_FICLONE: 2,
    UV_FS_COPYFILE_FICLONE_FORCE: 4,
    COPYFILE_FICLONE_FORCE: 4
  },
  promises: [Getter]
}
</code></pre></div><h4 id="_2-4-2-fs常用功能"><a href="#_2-4-2-fs常用功能" class="header-anchor">#</a> 2.4.2 fs常用功能</h4> <h4 id="_2-4-2-1-判断文件还是文件夹"><a href="#_2-4-2-1-判断文件还是文件夹" class="header-anchor">#</a> 2.4.2.1 判断文件还是文件夹</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果有错误</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件夹'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>报错结果</p> <div class="language- extra-class"><pre class="language-text"><code>[Error: ENOENT: no such file or directory, stat 'aa'] {
  errno: -2,
  code: 'ENOENT',
  syscall: 'stat',
  path: 'aa'
}
</code></pre></div><h4 id="_2-4-2-2-创建文件夹"><a href="#_2-4-2-2-创建文件夹" class="header-anchor">#</a> 2.4.2.2 创建文件夹</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'创建文件夹成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-3-写入文件"><a href="#_2-4-2-3-写入文件" class="header-anchor">#</a> 2.4.2.3 写入文件</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span> <span class="token string">'这是写入的内容'</span><span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>会把原有文件全覆盖</p></blockquote> <h4 id="_2-4-2-4-追加文件"><a href="#_2-4-2-4-追加文件" class="header-anchor">#</a> 2.4.2.4 追加文件</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span> <span class="token string">'hahah\n'</span><span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>不会覆盖原有文件,只会把内容追加到文件最后方</p></blockquote> <h4 id="_2-4-2-5-读取文件的内容"><a href="#_2-4-2-5-读取文件的内容" class="header-anchor">#</a> 2.4.2.5 读取文件的内容</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 十六进制: &lt;Buffer e8 bf 99 e6 98 af e5 86 99 e5 85 a5 e7 9a 84 e5 86 85 e5 ae b9&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 这是写入的内容</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-6-读取文件夹的内容"><a href="#_2-4-2-6-读取文件夹的内容" class="header-anchor">#</a> 2.4.2.6 读取文件夹的内容</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 结果: [ 'a.txt', 'httpModule.js', 'js', 'mod.js' ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-7-剪切文件并修改文件名字"><a href="#_2-4-2-7-剪切文件并修改文件名字" class="header-anchor">#</a> 2.4.2.7 剪切文件并修改文件名字</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'a.txt'</span><span class="token punctuation">,</span> <span class="token string">'./js/b.txt'</span><span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-8-删除目录-空文件夹"><a href="#_2-4-2-8-删除目录-空文件夹" class="header-anchor">#</a> 2.4.2.8 删除目录(空文件夹)</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'./css'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-9-递归删除文件夹"><a href="#_2-4-2-9-递归删除文件夹" class="header-anchor">#</a> 2.4.2.9 递归删除文件夹</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> Path  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//先获取到这个地址所对应的对象</span>
    <span class="token keyword">let</span> stats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token comment">//判断是否为文件夹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//是一个文件夹</span>

        <span class="token comment">//判断是否为空的文件夹</span>

        <span class="token comment">//读取文件夹当中的所有内容</span>
        <span class="token keyword">let</span> fileList <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>fileList<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//该文件夹不为空</span>
            
            <span class="token comment">// C:/Users/Guai/Desktop/教学/03-暴力删除,爬虫/javascript/ + filepath</span>
            fileList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">filepath</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token comment">//递归的思路</span>
                <span class="token function">del</span><span class="token punctuation">(</span> Path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> filepath<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//删除空的文件夹</span>
        fs<span class="token punctuation">.</span><span class="token function">rmdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//这是文件</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token function">del</span><span class="token punctuation">(</span><span class="token string">'C:/Users/Guai/Desktop/教学/03-暴力删除,爬虫/javascript'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-10-删除文件"><a href="#_2-4-2-10-删除文件" class="header-anchor">#</a> 2.4.2.10 删除文件</h4> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'./mod.js'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-11-文件流形式读取文件数据"><a href="#_2-4-2-11-文件流形式读取文件数据" class="header-anchor">#</a> 2.4.2.11 文件流形式读取文件数据</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> readStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
readStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> str <span class="token operator">+=</span> chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取完成</span>
readStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//读取失败</span>
readStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>如果文件比较小使用readFile,如果文件比较大使用文件流</p></blockquote> <h4 id="_2-4-2-12-文件流形式写入文件"><a href="#_2-4-2-12-文件流形式写入文件" class="header-anchor">#</a> 2.4.2.12 文件流形式写入文件</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'这是写入的内容\n'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'output.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> writeStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writeStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'finish'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入完成'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writeStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入失败'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-4-2-13-管道流传输"><a href="#_2-4-2-13-管道流传输" class="header-anchor">#</a> 2.4.2.13 管道流传输</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token comment">//创建一个可读流</span>
<span class="token keyword">let</span> readStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'output.txt'</span><span class="token punctuation">)</span>
<span class="token comment">//创建一个可写流</span>
<span class="token keyword">let</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'copy.txt'</span><span class="token punctuation">)</span>
readStream<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>writeStream<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'程序执行完毕'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_3-爬虫"><a href="#_3-爬虫" class="header-anchor">#</a> 3 爬虫</h2> <h3 id="_3-1-request模块的安装"><a href="#_3-1-request模块的安装" class="header-anchor">#</a> 3.1 request模块的安装</h3> <p><code>npm install request</code></p> <h3 id="_3-2-request模块引入"><a href="#_3-2-request模块引入" class="header-anchor">#</a> 3.2 request模块引入</h3> <p><code>let request = require('request');</code></p> <p>结果打印:</p> <div class="language- extra-class"><pre class="language-text"><code>[Function: request] {
  get: [Function (anonymous)],
  head: [Function (anonymous)],
  options: [Function (anonymous)],
  post: [Function (anonymous)],
  put: [Function (anonymous)],
  patch: [Function (anonymous)],
  del: [Function (anonymous)],
  delete: [Function (anonymous)],
  jar: [Function (anonymous)],
  cookie: [Function (anonymous)],
  defaults: [Function (anonymous)],
  forever: [Function (anonymous)],
  Request: [Function: Request] {
    debug: undefined,
    defaultProxyHeaderWhiteList: [
      'accept',           'accept-charset',
      'accept-encoding',  'accept-language',
      'accept-ranges',    'cache-control',
      'content-encoding', 'content-language',
      'content-location', 'content-md5',
      'content-range',    'content-type',
      'connection',       'date',
      'expect',           'max-forwards',
      'pragma',           'referer',
      'te',               'user-agent',
      'via'
    ],
    defaultProxyHeaderExclusiveList: [ 'proxy-authorization' ]
  },
  initParams: [Function: initParams],
  debug: [Getter/Setter]
}
</code></pre></div><h3 id="_3-3-request模块中的get方法"><a href="#_3-3-request模块中的get方法" class="header-anchor">#</a> 3.3 request模块中的get方法</h3> <h4 id="_3-3-1-获取百度首页源代码"><a href="#_3-3-1-获取百度首页源代码" class="header-anchor">#</a> 3.3.1 获取百度首页源代码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://www.baidu.com'</span> <span class="token comment">// 网站地址</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>打印结果:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;&lt;meta content=&quot;always&quot; name=&quot;referrer&quot;&gt;&lt;meta name=&quot;description&quot; content=&quot;全球领先的中文搜索引擎、致力于让网民更便捷地获取信息，找到所求。百度超过千亿的中文网页数据库，可以瞬间找到相关的搜索结果。&quot;&gt;&lt;link rel=&quot;shortcut icon&quot; href=&quot;//www.baidu.com/favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;&lt;link rel=&quot;search&quot; type=&quot;application/opensearchdescription+xml&quot; href=&quot;//www.baidu.com/content-search.xml&quot; title=&quot;百度搜索&quot;&gt;&lt;title&gt;百度一下，你就知道&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;body{margin:0;padding:0;text-align:center;background:#fff;height:100%}html{overflow-y:auto;color:#000;overflow:-moz-scrollbars;height:100%}body,input{font-size:12px;font-family:&quot;PingFang SC&quot;,Arial,&quot;Microsoft YaHei&quot;,sans-serif}a{text-decoration:none}a:hover{text-decoration:underline}img{border:0;-ms-interpolation-mode:bicubic}input{font-size:100%;border:0}body,form{position:relative;z-index:0}#wrapper{height:100%}#head_wrapper.s-ps-islite{padding-bottom:370px}#head_wrapper.s-ps-islite .s_form{position:relative;z-index:1}#head_wrapper.s-ps-islite .fm{position:absolute;bottom:0}#head_wrapper.s-ps-islite .s-p-top{position:absolute;bottom:40px;width:100%;height:181px}#head_wrapper.s-ps-islite #s_lg_img{position:static;margin:33px auto 0 auto;left:50%}#form{z-index:1}.s_form_wrapper{height:100%}#lh{margin:16px 0 5px;word-spacing:3px}.c-font-normal{font:13px/23px Arial,sans-serif}.c-color-t{color:#222}.c-btn,.c-btn:visited{color:#333!important}.c-btn{display:inline-block;overflow:hidden;font-family:inherit;font-weight:400;text-align:center;vertical-align:middle;outline:0;border:0;height:30px;width:80px;line-height:30px;font-size:13px;border-radius:6px;padding:0;background-color:#f5f5f6;cursor:pointer}.c-btn:hover{background-color:#315efb;color:#fff!important}a.c-btn{text-decoration:none}.c-btn-mini{height:24px;width:48px;line-height:24px}.c-btn-primary,.c-btn-primary:visited{color:#fff!important}.c-btn-primary{background-color:#4e6ef2}.c-btn-primary:hover{background-color:#315efb}a:active{color:#f60}#wrapper{position:relative;min-height:100%}#head{padding-bottom:100px;text-align:center}#wrapper{min-width:1250px;height:100%;min-height:600px}#head{position:relative;padding-bottom:0;height:100%;min-height:600px}.s_form_wrapper{height:100%}.quickdelete-wrap{position:relative}.tools{position:absolute;right:-75px}.s-isindex-wrap{position:relative}#head_wrapper.head_wrapper{width:auto}#head_wrapper{position:relative;height:40%;min-height:314px;max-height:510px;width:1000px;margin:0 auto}#head_wrapper .s-p-top{height:60%;min-height:185px;max-height:310px;position:relative;z-index:0;text-align:center}#head_wrapper input{outline:0;-webkit-appearance:none}#head_wrapper .s_btn_wr,#head_wrapper .s_ipt_wr{display:inline-block;zoom:1;background:0 0;vertical-align:top}#head_wrapper .s_ipt_wr{position:relative;width:546px}#head_wrapper .s_btn_wr{width:108px;height:44px;position:relative;z-index:2}#head_wrapper .s_ipt_wr:hover #kw{border-color:#a7aab5}#head_wrapper #kw{width:512px;height:16px;padding:12px 16px;font-size:16px;margin:0;vertical-align:top;outline:0;box-shadow:none;border-radius:10px 0 0 10px;border:2px solid #c4c7ce;background:#fff;color:#222;overflow:hidden;box-sizing:content-box}#head_wrapper #kw:focus{border-color:#4e6ef2!important;opacity:1}#head_wrapper .s_form{width:654px;height:100%;margin:0 auto;text-align:left;z-index:100}#head_wrapper .s_btn{cursor:pointer;width:108px;height:44px;line-height:45px;padding:0;background:0 0;background-color:#4e6ef2;border-radius:0 10px 10px 0;font-size:17px;color:#fff;box-shadow:none;font-weight:400;border:none;outline:0}#head_wrapper .s_btn:hover{background-color:#4662d9}#head_wrapper .s_btn:active{background-color:#4662d9}#head_wrapper .quickdelete-wrap{position:relative}#s_top_wrap{position:absolute;z-index:99;min-width:1000px;width:100%}.s-top-left{position:absolute;left:0;top:0;z-index:100;height:60px;padding-left:24px}.s-top-left .mnav{margin-right:31px;margin-top:19px;display:inline-block;position:relative}.s-top-left .mnav:hover .s-bri,.s-top-left a:hover{color:#315efb;text-decoration:none}.s-top-left .s-top-more-btn{padding-bottom:19px}.s-top-left .s-top-more-btn:hover .s-top-more{display:block}.s-top-right{position:absolute;right:0;top:0;z-index:100;height:60px;padding-right:24px}.s-top-right .s-top-right-text{margin-left:32px;margin-top:19px;display:inline-block;position:relative;vertical-align:top;cursor:pointer}.s-top-right .s-top-right-text:hover{color:#315efb}.s-top-right .s-top-login-btn{display:inline-block;margin-top:18px;margin-left:32px;font-size:13px}.s-top-right a:hover{text-decoration:none}#bottom_layer{width:100%;position:fixed;z-index:302;bottom:0;left:0;height:39px;padding-top:1px;overflow:hidden;zoom:1;margin:0;line-height:39px;background:#fff}#bottom_layer .lh{display:inline;margin-right:20px}#bottom_layer .lh:last-child{margin-left:-2px;margin-right:0}#bottom_layer .lh.activity{font-weight:700;text-decoration:underline}#bottom_layer a{font-size:12px;text-decoration:none}#bottom_layer .text-color{color:#bbb}#bottom_layer a:hover{color:#222}#bottom_layer .s-bottom-layer-content{text-align:center}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;wrapper&quot; class=&quot;wrapper_new&quot;&gt;&lt;div id=&quot;head&quot;&gt;&lt;div id=&quot;s-top-left&quot; class=&quot;s-top-left s-isindex-wrap&quot;&gt;&lt;a href=&quot;//news.baidu.com/&quot; target=&quot;_blank&quot; class=&quot;mnav c-font-normal c-color-t&quot;&gt;新闻&lt;/a&gt;&lt;a href=&quot;//www.hao123.com/&quot; target=&quot;_blank&quot; class=&quot;mnav c-font-normal c-color-t&quot;&gt;hao123&lt;/a&gt;&lt;a href=&quot;//map.baidu.com/&quot; target=&quot;_blank&quot; class=&quot;mnav c-font-normal c-color-t&quot;&gt;地图&lt;/a&gt;&lt;a href=&quot;//live.baidu.com/&quot; target=&quot;_blank&quot; class=&quot;mnav c-font-normal c-color-t&quot;&gt;直播&lt;/a&gt;&lt;a href=&quot;//haokan.baidu.com/?sfrom=baidu-top&quot; target=&quot;_blank&quot; class=&quot;mnav c-font-normal c-color-t&quot;&gt;视频&lt;/a&gt;&lt;a href=&quot;//tieba.baidu.com/&quot; target=&quot;_blank&quot; class=&quot;mnav c-font-normal c-color-t&quot;&gt;贴吧&lt;/a&gt;&lt;a href=&quot;//xueshu.baidu.com/&quot; target=&quot;_blank&quot; class=&quot;mnav c-font-normal c-color-t&quot;&gt;学术&lt;/a&gt;&lt;div class=&quot;mnav s-top-more-btn&quot;&gt;&lt;a href=&quot;//www.baidu.com/more/&quot; name=&quot;tj_briicon&quot; class=&quot;s-bri c-font-normal c-color-t&quot; target=&quot;_blank&quot;&gt;更多&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=&quot;u1&quot; class=&quot;s-top-right s-isindex-wrap&quot;&gt;&lt;a class=&quot;s-top-login-btn c-btn c-btn-primary c-btn-mini lb&quot; style=&quot;position:relative;overflow:visible&quot; name=&quot;tj_login&quot; href=&quot;//www.baidu.com/bdorz/login.gif?login&amp;amp;tpl=mn&amp;amp;u=http%3A%2F%2Fwww.baidu.com%2f%3fbdorz_come%3d1&quot;&gt;登录&lt;/a&gt;&lt;/div&gt;&lt;div id=&quot;head_wrapper&quot; class=&quot;head_wrapper s-isindex-wrap s-ps-islite&quot;&gt;&lt;div class=&quot;s_form&quot;&gt;&lt;div class=&quot;s_form_wrapper&quot;&gt;&lt;div id=&quot;lg&quot; class=&quot;s-p-top&quot;&gt;&lt;img hidefocus=&quot;true&quot; id=&quot;s_lg_img&quot; class=&quot;index-logo-src&quot; src=&quot;//www.baidu.com/img/flexible/logo/pc/index.png&quot; width=&quot;270&quot; height=&quot;129&quot; usemap=&quot;#mp&quot;&gt;&lt;map name=&quot;mp&quot;&gt;&lt;area style=&quot;outline:0&quot; hidefocus=&quot;true&quot; shape=&quot;rect&quot; coords=&quot;0,0,270,129&quot; href=&quot;//www.baidu.com/s?wd=%E7%99%BE%E5%BA%A6%E7%83%AD%E6%90%9C&amp;amp;sa=ire_dl_gh_logo_texing&amp;amp;rsv_dl=igh_logo_pcs&quot; target=&quot;_blank&quot; title=&quot;点击一下，了解更多&quot;&gt;&lt;/map&gt;&lt;/div&gt;&lt;a href=&quot;//www.baidu.com/&quot; id=&quot;result_logo&quot;&gt;&lt;/a&gt;&lt;form id=&quot;form&quot; name=&quot;f&quot; action=&quot;//www.baidu.com/s&quot; class=&quot;fm&quot;&gt;&lt;input type=&quot;hidden&quot; name=&quot;ie&quot; value=&quot;utf-8&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;f&quot; value=&quot;8&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;rsv_bp&quot; value=&quot;1&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;rsv_idx&quot; value=&quot;1&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;ch&quot; value=&quot;&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;tn&quot; value=&quot;baidu&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;bar&quot; value=&quot;&quot;&gt; &lt;span class=&quot;s_ipt_wr quickdelete-wrap&quot;&gt;&lt;input id=&quot;kw&quot; name=&quot;wd&quot; class=&quot;s_ipt&quot; value=&quot;&quot; maxlength=&quot;255&quot; autocomplete=&quot;off&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s_btn_wr&quot;&gt;&lt;input type=&quot;submit&quot; id=&quot;su&quot; value=&quot;百度一下&quot; class=&quot;bg s_btn&quot;&gt; &lt;/span&gt;&lt;input type=&quot;hidden&quot; name=&quot;rn&quot; value=&quot;&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;fenlei&quot; value=&quot;256&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;oq&quot; value=&quot;&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;rsv_pq&quot; value=&quot;b9ff093e0000e419&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;rsv_t&quot; value=&quot;3635FYbdbC8tlWmudZmYaUnaucNe+RzTzNEGqg/JuniQU10WL5mtMQehIrU&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;rqlang&quot; value=&quot;cn&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;rsv_enter&quot; value=&quot;1&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;rsv_dl&quot; value=&quot;ib&quot;&gt;&lt;/form&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=&quot;bottom_layer&quot; class=&quot;s-bottom-layer s-isindex-wrap&quot;&gt;&lt;div class=&quot;s-bottom-layer-content&quot;&gt;&lt;p class=&quot;lh&quot;&gt;&lt;a class=&quot;text-color&quot; href=&quot;//home.baidu.com/&quot; target=&quot;_blank&quot;&gt;关于百度&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;a class=&quot;text-color&quot; href=&quot;//ir.baidu.com/&quot; target=&quot;_blank&quot;&gt;About Baidu&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;a class=&quot;text-color&quot; href=&quot;//www.baidu.com/duty&quot; target=&quot;_blank&quot;&gt;使用百度前必读&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;a class=&quot;text-color&quot; href=&quot;//help.baidu.com/&quot; target=&quot;_blank&quot;&gt;帮助中心&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;a class=&quot;text-color&quot; href=&quot;//www.beian.gov.cn/portal/registerSystemInfo?recordcode=11000002000001&quot; target=&quot;_blank&quot;&gt;京公网安备11000002000001号&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;a class=&quot;text-color&quot; href=&quot;//beian.miit.gov.cn/&quot; target=&quot;_blank&quot;&gt;京ICP证030173号&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;span id=&quot;year&quot; class=&quot;text-color&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;span class=&quot;text-color&quot;&gt;互联网药品信息服务资格证书 (京)-经营性-2017-0020&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;lh&quot;&gt;&lt;a class=&quot;text-color&quot; href=&quot;//www.baidu.com/licence/&quot; target=&quot;_blank&quot;&gt;信息网络传播视听节目许可证 0110516&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var date=new Date,year=date.getFullYear();document.getElementById(&quot;year&quot;).innerText=&quot;©&quot;+year+&quot; Baidu &quot;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;
</code></pre></div><h4 id="_3-3-2-爬取网站图片"><a href="#_3-3-2-爬取网站图片" class="header-anchor">#</a> 3.3.2 爬取网站图片</h4> <h4 id="_3-3-2-1-获取网站源码"><a href="#_3-3-2-1-获取网站源码" class="header-anchor">#</a> 3.3.2.1 获取网站源码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://photo.china.com.cn'</span> <span class="token comment">// 网址</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-3-2-2-分析图片url"><a href="#_3-3-2-2-分析图片url" class="header-anchor">#</a> 3.3.2.2 分析图片URL</h4> <ul><li>http://images.china.cn/site1000/2022-02/09/81e4dee8-a4f1-44f6-98e3-226339cc78ba.jpg</li> <li>http://images.china.cn/site1000/2022-02/11/c37a911c-80dc-4190-a47a-6e277c94fac0.jpg</li> <li>http://images.china.cn/site1000/2022-02/16/7db250f1-255d-478a-9652-d20c4bb2af06.jpg</li> <li>http://images.china.cn/site1000/2022-01/28/0ea9d856-5c64-4985-ba5d-155436c3b358.jpg</li> <li>http://images.china.cn/site1000/2019-10/23/a01dd522-0fce-430f-928c-003330f5faaa.jpg</li></ul> <h4 id="_3-3-2-3-正则匹配图片url"><a href="#_3-3-2-3-正则匹配图片url" class="header-anchor">#</a> 3.3.2.3 正则匹配图片URL</h4> <div class="language- extra-class"><pre class="language-text"><code>let reg = /http:\/\/images\.china\.cn\/site1000\/\d+-\d+\/\d+\/[\da-z-]+\.jpg/g;
let imgSrc = body.match(reg);
console.log(imgSrc);
</code></pre></div><h4 id="_3-3-2-4-获取得到图片url"><a href="#_3-3-2-4-获取得到图片url" class="header-anchor">#</a> 3.3.2.4 获取得到图片URL</h4> <div class="language- extra-class"><pre class="language-text"><code>[
  'http://images.china.cn/site1000/2021-08/25/99c99115-ba07-446b-b4c9-0ed25cce48e7.jpg',
  'http://images.china.cn/site1000/2022-02/19/2df8cfa2-dd08-403f-ab3b-b5338994e17d.jpg',
  'http://images.china.cn/site1000/2022-02/12/ea9f52cc-5ff2-4a67-b282-0a428853abde.jpg',
  'http://images.china.cn/site1000/2022-02/11/c37a911c-80dc-4190-a47a-6e277c94fac0.jpg',
  'http://images.china.cn/site1000/2022-02/11/caf38f90-977c-46a3-b693-2639906d1947.jpg',
  'http://images.china.cn/site1000/2018-01/02/943b307d-5914-43e9-aaf1-90538f186350.jpg',
  'http://images.china.cn/site1000/2017-05/10/6c0b840a23ae1a7dfaa401.jpg',
  'http://images.china.cn/site1000/2017-05/10/6c0b840a23ae1a7dfd3f03.jpg',
  'http://images.china.cn/site1000/2021-08/25/b3c96d57-bcc9-4e67-9e58-6d8eb7340678.jpg',
  'http://images.china.cn/site1000/2022-02/19/30a586e1-6fa6-4876-973e-cb287e9724ae.jpg',
  'http://images.china.cn/site1000/2022-02/19/ae2569ab-ee18-45fc-aa9b-69bef2c6a8dc.jpg',
  'http://images.china.cn/site1000/2022-02/19/76bbd161-f8ac-48eb-8744-f87b214589dd.jpg',
  'http://images.china.cn/site1000/2022-02/19/0ca32007-034a-4b04-a7a6-f5f27c35012c.jpg',
  'http://images.china.cn/site1000/2022-02/19/2e6fe4c9-a79e-4700-b181-08195de2e5db.jpg',
  'http://images.china.cn/site1000/2022-02/19/a3008316-d221-4305-bd1d-4391b151ea79.jpg',
  'http://images.china.cn/site1000/2022-01/05/7e1a82e3-e5f4-43c5-8a28-3e8f1a5b16d1.jpg',
  'http://images.china.cn/site1000/2021-12/10/f7626024-035d-4527-bc1a-a7ad901337ca.jpg',
  'http://images.china.cn/site1000/2021-12/09/30274ab1-d8a9-4a26-83ed-2e3d9fc33c64.jpg',
  'http://images.china.cn/site1000/2022-02/11/adad171b-8fcc-4090-b8aa-28053456174c.jpg',
  'http://images.china.cn/site1000/2021-08/25/c5536d47-f465-46fd-af74-d1327178dd3c.jpg',
  'http://images.china.cn/site1000/2021-08/20/42027d8b-891f-4302-a473-c5213e54bbea.jpg',
  'http://images.china.cn/site1000/2021-07/30/d1b380c7-ef21-42e3-8128-268d12c54d0d.jpg',
  'http://images.china.cn/site1000/2021-02/03/c71f0803-c997-4c0d-be9d-7a646bf9524f.jpg',
  'http://images.china.cn/site1000/2021-11/18/eae9a435-76c2-426d-bf26-4b8d52ffc832.jpg',
  'http://images.china.cn/site1000/2020-08/18/aa0c66a1-37d0-40ba-ae5c-18f187de0121.jpg',
  'http://images.china.cn/site1000/2019-11/06/4cfac031-fb93-4e79-9066-d7efcf67d850.jpg',
  'http://images.china.cn/site1000/2019-10/23/a01dd522-0fce-430f-928c-003330f5faaa.jpg',
  'http://images.china.cn/site1000/2019-01/29/099c7ee5-5dd6-4f0a-b48a-d8f5fffecfd2.jpg',
  'http://images.china.cn/site1000/2019-01/21/5a006720-9f74-4e6c-b34a-173711e9fcd3.jpg',
  'http://images.china.cn/site1000/2021-11/18/e808ade7-519a-46d3-9eeb-daca70178929.jpg',
  'http://images.china.cn/site1000/2018-03/03/120b0f5c-15e1-44f6-8f8d-feff7250f3ff.jpg',
  'http://images.china.cn/site1000/2018-02/13/a6e0027c-f946-4f81-a196-b3a5086028f3.jpg',
  'http://images.china.cn/site1000/2017-11/20/b8aeed99057d1b7ce14e5a.jpg',
  'http://images.china.cn/site1000/2017-09/01/6c0b840a25301b1304f534.jpg',
  'http://images.china.cn/site1000/2017-08/23/6c0b840a23ae1b072a9854.jpg',
  'http://images.china.cn/site1000/2022-02/11/c37a911c-80dc-4190-a47a-6e277c94fac0.jpg',
  'http://images.china.cn/site1000/2020-12/31/43b33d6d-bf01-4c1b-b446-c9396d5ffbf9.jpg',
  'http://images.china.cn/site1000/2020-10/10/b3db6a83-d6c4-459b-8589-62b3a02cdd7d.jpg',
  'http://images.china.cn/site1000/2019-11/13/57abbc6a-8122-46e1-8cca-d47021a3f3a6.jpg',
  'http://images.china.cn/site1000/2019-11/06/4cfac031-fb93-4e79-9066-d7efcf67d850.jpg',
  'http://images.china.cn/site1000/2019-10/23/a01dd522-0fce-430f-928c-003330f5faaa.jpg',
  'http://images.china.cn/site1000/2020-08/18/aa0c66a1-37d0-40ba-ae5c-18f187de0121.jpg',
  'http://images.china.cn/site1000/2019-11/04/779562e6-5da4-41ff-ab75-50ccccac125f.jpg',
  'http://images.china.cn/site1000/2019-03/27/7b29eeb6-adb5-4e37-8d22-c9a5d1cdf08c.jpg',
  'http://images.china.cn/site1000/2019-03/27/d6f2c206-f0bb-4c4e-ae1d-e04c62fd2b4a.jpg',
  'http://images.china.cn/site1000/2017-11/20/b8aeed99057d1b7cd0f53d.jpg',
  'http://images.china.cn/site1000/2019-01/21/5a006720-9f74-4e6c-b34a-173711e9fcd3.jpg',
  'http://images.china.cn/site1000/2018-04/27/9ea32424-8a68-437b-a946-0db79c9d2aac.jpg',
  'http://images.china.cn/site1000/2018-02/07/65addd13-9156-4008-9189-dd72113389f1.jpg',
  'http://images.china.cn/site1000/2017-12/21/6c0b840a23ae1b80a3282c.jpg',
  'http://images.china.cn/site1000/2016-09/24/b8aeed99057d1950b4d32b.jpg',
  'http://images.china.cn/site1000/2016-07/18/6c0b840a23ae18f6d28d2b.jpg',
  'http://images.china.cn/site1000/2022-01/28/0ea9d856-5c64-4985-ba5d-155436c3b358.jpg',
  'http://images.china.cn/site1000/2018-02/12/cb05bea2-039b-40e6-a77f-49eee9d529c1.jpg'
]
</code></pre></div><h4 id="_3-3-2-5-将url写入到txt文件"><a href="#_3-3-2-5-将url写入到txt文件" class="header-anchor">#</a> 3.3.2.5 将URL写入到txt文件</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'imgSrc.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writeStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-3-2-6-完整代码"><a href="#_3-3-2-6-完整代码" class="header-anchor">#</a> 3.3.2.6 完整代码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://photo.china.com.cn'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">http:\/\/images\.china\.cn\/site1000\/\d+-\d+\/\d+\/[\da-z-]+\.jpg</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'imgSrc.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  writeStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-3-3-爬取小说文件"><a href="#_3-3-3-爬取小说文件" class="header-anchor">#</a> 3.3.3 爬取小说文件</h4> <h4 id="_3-3-3-1-安装cheerio模块"><a href="#_3-3-3-1-安装cheerio模块" class="header-anchor">#</a> 3.3.3.1 安装cheerio模块</h4> <p><code>npm install cheerio</code></p> <blockquote><p>cheerio和jquery类似,因为已经把jquery库中的一些内容进行了删减保存了真正需要的API</p></blockquote> <h4 id="_3-3-3-2-获取a标签的href属性值"><a href="#_3-3-3-2-获取a标签的href属性值" class="header-anchor">#</a> 3.3.3.2 获取a标签的href属性值</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.col-4 a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-3-3-3-封装获取小说内容函数"><a href="#_3-3-3-3-封装获取小说内容函数" class="header-anchor">#</a> 3.3.3.3 封装获取小说内容函数</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> txt <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./fiction/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.txt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> txt<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-3-3-4-将小说内容写入txt文件"><a href="#_3-3-3-4-将小说内容写入txt文件" class="header-anchor">#</a> 3.3.3.4 将小说内容写入txt文件</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.col-4 a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-3-3-5-完整代码"><a href="#_3-3-3-5-完整代码" class="header-anchor">#</a> 3.3.3.5 完整代码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> cheerio <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cheerio'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://huayu.zongheng.com/showchapter/1092749.html'</span> <span class="token comment">// 网址</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.col-4 a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> txt <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./fiction/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.txt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> txt<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-express框架"><a href="#_4-express框架" class="header-anchor">#</a> 4 express框架</h2> <h3 id="_4-1-art-template"><a href="#_4-1-art-template" class="header-anchor">#</a> 4.1 art-template</h3> <h4 id="_4-1-1-下载并导入art-template模块"><a href="#_4-1-1-下载并导入art-template模块" class="header-anchor">#</a> 4.1.1 下载并导入art-template模块</h4> <ul><li><p>下载: <code>npm install art-template</code></p></li> <li><p>导入: <code>let template = require('art-template');</code></p></li></ul> <h4 id="_4-1-2-创建html模板内容"><a href="#_4-1-2-创建html模板内容" class="header-anchor">#</a> 4.1.2 创建HTML模板内容</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 文件名是template.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>模板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  我的名字是{{name}}
  我的年龄是{{age}}
  我的课程是{{course}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_4-1-3-获取html源码"><a href="#_4-1-3-获取html源码" class="header-anchor">#</a> 4.1.3 获取HTML源码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> template <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'art-template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./template.html'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> err<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// html源码</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-1-4-渲染赋值"><a href="#_4-1-4-渲染赋值" class="header-anchor">#</a> 4.1.4 渲染赋值</h4> <blockquote><p>类似Vue的模板</p></blockquote> <p>渲染:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> temp <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Karl'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
  <span class="token literal-property property">course</span><span class="token operator">:</span> <span class="token string">'node'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>渲染结果:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>模板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  我的名字是Karl
  我的年龄是22
  我的课程是node
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_4-1-5-完整代码"><a href="#_4-1-5-完整代码" class="header-anchor">#</a> 4.1.5 完整代码</h4> <p>html代码:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 文件名是template.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>模板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  我的名字是{{name}}
  我的年龄是{{age}}
  我的课程是{{course}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>js代码:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> template <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'art-template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./template.html'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> err<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> temp <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Karl'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token literal-property property">course</span><span class="token operator">:</span> <span class="token string">'node'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-2-express的get请求"><a href="#_4-2-express的get请求" class="header-anchor">#</a> 4.2 express的get请求</h3> <h4 id="_4-2-1-下载并导入express模块"><a href="#_4-2-1-下载并导入express模块" class="header-anchor">#</a> 4.2.1 下载并导入express模块</h4> <ul><li><p>下载: <code>npm install express</code></p></li> <li><p>导入: <code>let express = require('express');</code></p></li></ul> <h4 id="_4-2-2-监听端口"><a href="#_4-2-2-监听端口" class="header-anchor">#</a> 4.2.2 监听端口</h4> <p>创建app: <code>let app = express();</code></p> <p>监听端口:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8000</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">监听</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">端口成功~</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-2-3-get请求"><a href="#_4-2-3-get请求" class="header-anchor">#</a> 4.2.3 get请求</h4> <h4 id="_4-2-3-1-固定路由请求"><a href="#_4-2-3-1-固定路由请求" class="header-anchor">#</a> 4.2.3.1 固定路由请求</h4> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'这是根路径'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'login页面'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'index页面'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-2-3-2-动态路由请求"><a href="#_4-2-3-2-动态路由请求" class="header-anchor">#</a> 4.2.3.2 动态路由请求</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// :name相当于形参</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/course/:name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span> <span class="token comment">// 路由名字</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> pageNum <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">这是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">课程</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageNum<span class="token operator">==</span><span class="token keyword">undefined</span><span class="token operator">?</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">的第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageNum<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">页</span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>test1:</p> <ul><li>input: <code>http://localhost:8000/course/C++</code></li> <li>output: <code>这是C++课程.</code></li></ul></li> <li><p>test2:</p> <ul><li>input: <code>http://localhost:8000/course/python?pageNum=10</code></li> <li>output: <code>这是python课程的第10页.</code></li></ul></li></ul> <h4 id="_4-2-3-3-错误路由中间件"><a href="#_4-2-3-3-错误路由中间件" class="header-anchor">#</a> 4.2.3.3 错误路由中间件</h4> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'这是404页面'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-2-3-4-路由错误后重定向"><a href="#_4-2-3-4-路由错误后重定向" class="header-anchor">#</a> 4.2.3.4 路由错误后重定向</h4> <h4 id="_4-2-3-4-1-开放指定目录中的资源"><a href="#_4-2-3-4-1-开放指定目录中的资源" class="header-anchor">#</a> 4.2.3.4.1 开放指定目录中的资源</h4> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>只要新建文件夹并命名为public即可,文件夹的所以资源就可直接访问如:<code>http://localhost:8000/js/a.js</code></p></blockquote> <h4 id="_4-2-3-4-2-路由重定向"><a href="#_4-2-3-4-2-路由重定向" class="header-anchor">#</a> 4.2.3.4.2 路由重定向</h4> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// res.send('这是404页面');</span>
  res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'./html/404.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li><p>只能输入1层文件夹名: <code>http://localhost:8000/htmls</code>,能正常显示404;</p></li> <li><p>如果输入2层文件夹名则报错: <code>http://localhost:8000/htmls/404.html</code>.</p></li></ul></blockquote> <h4 id="_4-2-3-4-3-404页面跳转到首页"><a href="#_4-2-3-4-3-404页面跳转到首页" class="header-anchor">#</a> 4.2.3.4.3 404页面跳转到首页</h4> <p>代码如下:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>抱歉你访问的页面不存在,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>s后访问首页.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>span<span class="token punctuation">.</span>innerText <span class="token operator">!==</span> <span class="token string">'1'</span><span class="token punctuation">)</span> 
        span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> span<span class="token punctuation">.</span>innerText <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'./index.html'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_4-2-3-5-完整代码"><a href="#_4-2-3-5-完整代码" class="header-anchor">#</a> 4.2.3.5 完整代码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8000</span><span class="token punctuation">;</span>

<span class="token comment">//通过中间件调用自身的API,去开放指定目录中的资源</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'这是根路径'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'login页面'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'index页面'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/course/:name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> pageNum <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">这是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">课程</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageNum<span class="token operator">==</span><span class="token keyword">undefined</span><span class="token operator">?</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">的第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageNum<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">页</span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// res.send('这是404页面');</span>
  res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'./html/404.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">监听</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">端口成功~</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-3-express结合art-template"><a href="#_4-3-express结合art-template" class="header-anchor">#</a> 4.3 express结合art-template</h3> <h4 id="_4-3-1-下载并导入使用模块"><a href="#_4-3-1-下载并导入使用模块" class="header-anchor">#</a> 4.3.1 下载并导入使用模块</h4> <ul><li><p>下载:</p> <ul><li><p><strong>art-template</strong>模块: <code>npm install art-template</code></p></li> <li><p><strong>express-art-template</strong>模块: <code>npm install express-art-template</code></p></li></ul></li> <li><p>导入:</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//虽然这里没有用到art-template这个包,但是我们在使用express-art-template的时候,也必须要下载art-template这个包,这是因为express-art-template这个包里面依赖了很多art-template这个包中的内容</span>
app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-art-template'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_4-3-2-渲染数据"><a href="#_4-3-2-渲染数据" class="header-anchor">#</a> 4.3.2 渲染数据</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//有一个默认的规则,它会自动从views目录中查找该模板文件</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'./html/template.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Karl'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token literal-property property">course</span><span class="token operator">:</span> <span class="token string">'node.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>一定要新建一个<strong>views</strong>文件夹
/: 代表输入网址的路由可以访问到渲染后的页面,等价于输入<code>http://localhost:8000/</code>就会访问渲染后到页面;
./html/template.html: 代表views文件夹下的模板路径</p></div> <h4 id="_4-3-3-完整代码"><a href="#_4-3-3-完整代码" class="header-anchor">#</a> 4.3.3 完整代码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8000</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-art-template'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'./html/template.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Karl'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token literal-property property">course</span><span class="token operator">:</span> <span class="token string">'node.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">监听</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">端口成功~</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-4-express的post请求"><a href="#_4-4-express的post请求" class="header-anchor">#</a> 4.4 express的post请求</h3> <h4 id="_4-4-1-引入获取post参数的方法"><a href="#_4-4-1-引入获取post参数的方法" class="header-anchor">#</a> 4.4.1 引入获取post参数的方法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//express框架的自带方法获取post参数</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-4-2-表单页面"><a href="#_4-4-2-表单页面" class="header-anchor">#</a> 4.4.2 表单页面</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>模板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    账号: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    密码: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_4-4-3-监听登陆页面"><a href="#_4-4-3-监听登陆页面" class="header-anchor">#</a> 4.4.3 监听登陆页面</h4> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/html/login.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 或者用模板渲染</span>
<span class="token comment">// app.get('/login', (req, res) =&gt; {</span>
<span class="token comment">//    res.render('./html/login.html', {</span>
<span class="token comment">//        name: '账号',</span>
<span class="token comment">//        psw: '密码'</span>
<span class="token comment">//    })</span>
<span class="token comment">// })</span>
</code></pre></div><h4 id="_4-4-4-获取表单参数"><a href="#_4-4-4-获取表单参数" class="header-anchor">#</a> 4.4.4 获取表单参数</h4> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/post'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: 'fzw', pwd: '123456' }</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'fzw'</span> <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>pwd <span class="token operator">===</span> <span class="token string">'123456'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/html/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/html/404.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-cookie和session"><a href="#_5-cookie和session" class="header-anchor">#</a> 5 cookie和session</h2> <h3 id="_5-1-cookie"><a href="#_5-1-cookie" class="header-anchor">#</a> 5.1 cookie</h3> <h4 id="_5-1-1-cookie简介"><a href="#_5-1-1-cookie简介" class="header-anchor">#</a> 5.1.1 cookie简介</h4> <p>cookie是存储于访问者的计算机中的变量.可以让我们用同一个浏览器访问同一个域名的时候共享数据.</p> <p>HTTP是无状态协议.当你浏览了一个页面,然后转到同一个网站的另一个页面,服务器无法认识到这是同一个浏览器在访问同一个网站.每一次的访问,都是没有任何关系的.</p> <ul><li>cookie保存在浏览器本地,正常设置的cookie是不加密的,用户可以自由看到</li> <li>用户可以删除cookie</li> <li>cookie可以修改</li> <li>cookie可以用于攻击</li> <li>cookie存储量很小</li></ul> <h4 id="_5-1-2-下载并导入cookie-parser模块"><a href="#_5-1-2-下载并导入cookie-parser模块" class="header-anchor">#</a> 5.1.2 下载并导入cookie-parser模块</h4> <ul><li><p>下载: <code>npm install cookie-parser</code></p></li> <li><p>导入: <code>let cookie = require('cookie-parser');</code></p></li></ul> <h4 id="_5-1-3-设置cookie值"><a href="#_5-1-3-设置cookie值" class="header-anchor">#</a> 5.1.3 设置cookie值</h4> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'hahaha'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token comment">// 过期时间,单位毫秒</span>
    <span class="token comment">// domain: '.zixuan.com',//指定那个域名能共享cookie信息</span>
    <span class="token comment">// path:'/index' //设置缓存的路径,只有/index才能访问得到cookie信息</span>
    <span class="token comment">// secure:false, //设置是否只能通过https来传递此条cookie  true:https   false:http</span>
    <span class="token literal-property property">httpOnly</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//不能通过document.cookie来访问cookie信息,防止程序(JS)脚本来读取Cookie信息,防止XSS攻击</span>
    <span class="token comment">//XSS(CSS)攻击:巧妙的输入一些恶意代码到网页,来获取一些不该获取到的数据</span>
    <span class="token comment">//SQL注入</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'这是根页面'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 写在cookie设置的下方</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-2-session"><a href="#_5-2-session" class="header-anchor">#</a> 5.2 session</h3> <h4 id="_5-2-1-下载并导入express-session模块"><a href="#_5-2-1-下载并导入express-session模块" class="header-anchor">#</a> 5.2.1 下载并导入express-session模块</h4> <ul><li><p>下载: <code>npm install express-session</code></p></li> <li><p>导入: <code>let session = require('express-session');</code></p></li></ul> <h4 id="_5-2-2-设置session的中间件"><a href="#_5-2-2-设置session的中间件" class="header-anchor">#</a> 5.2.2 设置session的中间件</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//设置seesion 的中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">'keyboard cat'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resave</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//强制保存 session 即使它没有变化,建议改为false</span>
    <span class="token literal-property property">saveUninitialized</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//无论有没有session cookie 每次请求都设置一个session cookie</span>
    <span class="token literal-property property">cookie</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rolling</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token comment">//在每次请求时都会更新cookie信息,重置cookie过期时间</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_5-2-3-session与cookie的区别"><a href="#_5-2-3-session与cookie的区别" class="header-anchor">#</a> 5.2.3 session与cookie的区别</h4> <ol><li>cookie数据存放在客户的浏览器上,session数据放在服务器上;</li> <li>cookie不是很安全,别人可以分析存放在本地的COOKIE并进行COOKIE欺骗,考虑到安全应当使用session;</li> <li>session会在一定时间内保存在服务器上.当访问增多会比较占用你服务器的性能考虑到减轻服务器性能方面,应当使用COOKIE;</li> <li>单个cookie保存的数据不能超过4K,很多浏览器都限制一个站点最多保存20个cookie.</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/plugin/前端笔记.html" class="prev">
          前端笔记
        </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;height:60px;display:none;" data-v-5775ee02>
        欢迎来到 火龙果文档
      </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
      看板娘
    </div></div></div></div>
    <script src="/plugin/assets/js/app.c41e27de.js" defer></script><script src="/plugin/assets/js/2.15a8e080.js" defer></script><script src="/plugin/assets/js/47.78afac36.js" defer></script><script src="/plugin/assets/js/7.182851cf.js" defer></script>
  </body>
</html>
